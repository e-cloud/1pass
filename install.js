!function(){'use strict';var r=function(t){return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:document).querySelector(t)};function a(a){return Object.keys(a).reduce(function(t,e){var n=encodeURIComponent(e),r=encodeURIComponent(a[n]);return t.push(n+'='+r),t},[]).join('&')}var s={bookmarkletSrc:''},t=function(){var r;(r='./bundle.js',new Promise(function(t,e){var n=new XMLHttpRequest;n.addEventListener('load',function(){200===n.status||304===n.status?t(n.responseText):e(new Error('Script load failed'),n.responseText)}),n.open('GET',r),n.send()})).then(function(t){s.bookmarkletSrc=t,n.init()})},e=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:32,e='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split(''),n=e.length-1,r=[],a=t;0<a;--a)r.push(e[Math.floor(Math.random()*n)]);return r.join('')},o=function(t,e){return t.replace(/passOutLen:.+?,/,'passOutLen:'+e.passOutLen+',').replace(/charset:.+?,/,'charset:'+e.charset+',').replace(/itCount:.+?,/,'itCount:'+e.itCount+',').replace(/salt:\s*?['"][^'"]+['"]/,'salt:'+JSON.stringify(e.salt))},n={init:function(){n.bindEventHandlers(),n.updateLinks(r('#install-form'))},bindEventHandlers:function(){r('#change-salt').addEventListener('click',function(){r('#salt').value=e()}),r('#install-form').addEventListener('submit',function(t){t.preventDefault();var e=t.target.elements;n.updateLinks(e)})},updateLinks:function(t){var e={charset:parseInt(t.charset.value),passOutLen:parseInt(t.passLen.value),itCount:parseInt(t.iteration.value),salt:t.salt.value||''},n=o(s.bookmarkletSrc,e);r('#bookmarklet').setAttribute('href','javascript:'+n),r('#mobile').setAttribute('href','mobile.html?'+a(e)),r('#mobile_offline').setAttribute('href','./pwa.html?'+a(e))}};t()}();
